0a02a76af5951bf7f4c7029c0ea6d29d96c0f682: Pulling from envoyproxy/envoy-build-ubuntu
Digest: sha256:a4f11960892ec74da232defde55fb21902548b0f95eb7d532b51c1cfefa50926
Status: Image is up to date for envoyproxy/envoy-build-ubuntu:0a02a76af5951bf7f4c7029c0ea6d29d96c0f682
docker.io/envoyproxy/envoy-build-ubuntu:0a02a76af5951bf7f4c7029c0ea6d29d96c0f682

real	0m4.038s
user	0m0.016s
sys	0m0.057s
mesg: ttyname failed: Inappropriate ioctl for device
No remote cache is set, skipping setup remote cache.
ENVOY_SRCDIR=/source
ENVOY_BUILD_TARGET=//source/exe:envoy-static
ENVOY_BUILD_ARCH=x86_64
$TEST_TMPDIR defined: output root default is '/build/tmp' and max_idle_secs default is '15'.
Starting local Bazel server and connecting to it...
[35mWARNING: [0minfo command does not support starlark options. Ignoring options: [--@com_googlesource_googleurl//build_config:system_icu=0]
[0m$TEST_TMPDIR defined: output root default is '/build/tmp' and max_idle_secs default is '15'.
[35mWARNING: [0minfo command does not support starlark options. Ignoring options: [--@com_googlesource_googleurl//build_config:system_icu=0]
[0mHEAD is now at ac6a66a4 Changes to make example buildable with new Envoy include paths (#149)
$TEST_TMPDIR defined: output root default is '/build/tmp' and max_idle_secs default is '15'.
[35mWARNING: [0minfo command does not support starlark options. Ignoring options: [--@com_googlesource_googleurl//build_config:system_icu=0]
[0mbuilding using 80 CPUs
building for x86_64
clang toolchain with libc++ configured
bazel fastbuild build with contrib extensions and tests...
Building...
Building (type=fastbuild target=//contrib/exe:envoy-static debug=//contrib/exe:envoy-static.dwp name=envoy-contrib)...
ENVOY_BIN=contrib/exe/envoy-static
$TEST_TMPDIR defined: output root default is '/build/tmp' and max_idle_secs default is '15'.
[32mINFO: [0mAnalyzed target //contrib/exe:envoy-static (835 packages loaded, 67079 targets configured).
[32mINFO: [0mFound 1 target...
[31m[1mERROR: [0m/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/external/envoy/bazel/foreign_cc/BUILD:86:12: Foreign Cc - CMake: Building dml failed: (Exit 1): bash failed: error executing command (from target @envoy//bazel/foreign_cc:dml) 
  (cd /build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy && \
  exec env - \
    BAZEL_COMPILER=clang \
    BAZEL_CXXOPTS='-stdlib=libc++' \
    BAZEL_LINKLIBS=-l%:libc++.a:-l%:libc++abi.a \
    BAZEL_LINKOPTS=-lm:-pthread \
    CC=clang \
    CLANG_FORMAT=clang-format \
    CXX=clang++ \
    CXXFLAGS='-stdlib=libc++' \
    LDFLAGS='-stdlib=libc++' \
    LLVM_CONFIG=/opt/llvm/bin/llvm-config \
    PATH=/opt/llvm/bin:/opt/llvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin \
  /bin/bash -c bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/wrapper_build_script.sh)
# Configuration: ce74f6878a76383664194ba0299d987d3bcf27092c8005391440803422a2b801
# Execution platform: @local_config_platform//:host

Use --sandbox_debug to see verbose messages from the sandbox
rules_foreign_cc: Build failed!
rules_foreign_cc: Keeping temp build directory and dependencies directory for debug.
rules_foreign_cc: Please note that the directories inside a sandbox are still cleaned unless you specify --sandbox_debug Bazel command line flag.
rules_foreign_cc: Printing build logs:
_____ BEGIN BUILD LOGS _____

Bazel external C/C++ Rules. Building library dml

Environment:______________
BAZEL_LINKLIBS=-l%:libc++.a:-l%:libc++abi.a
EXT_BUILD_ROOT=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy
INSTALLDIR=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml
LLVM_CONFIG=/opt/llvm/bin/llvm-config
BAZEL_LINKOPTS=-lm:-pthread
CC=clang
CXXFLAGS=-stdlib=libc++
BAZEL_COMPILER=clang
PWD=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy
CLANG_FORMAT=clang-format
BUILD_TMPDIR=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml.build_tmpdir
TMPDIR=/tmp
EXT_BUILD_DEPS=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml.ext_build_deps
CXX=clang++
SHLVL=3
BUILD_LOG=bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/CMake.log
BUILD_SCRIPT=bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/build_script.sh
BAZEL_CXXOPTS=-stdlib=libc++
BUILD_WRAPPER_SCRIPT=bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/wrapper_build_script.sh
LDFLAGS=-stdlib=libc++
PATH=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy:/opt/llvm/bin:/opt/llvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
_=/usr/bin/env
__________________________
+ cmake -DCMAKE_AR=/usr/bin/ar '-DCMAKE_SHARED_LINKER_FLAGS=-shared -fuse-ld=/opt/llvm/bin/ld.lld -Wl,-no-as-needed -Wl,-z,relro,-z,now -B/opt/llvm/bin -lm -pthread -l:libc++.a -l:libc++abi.a -fuse-ld=lld -L/opt/llvm/lib -Wl,-rpath,/opt/llvm/lib' '-DCMAKE_EXE_LINKER_FLAGS=-fuse-ld=/opt/llvm/bin/ld.lld -Wl,-no-as-needed -Wl,-z,relro,-z,now -B/opt/llvm/bin -lm -pthread -l:libc++.a -l:libc++abi.a -fuse-ld=lld -L/opt/llvm/lib -Wl,-rpath,/opt/llvm/lib' -DCMAKE_INSTALL_LIBDIR=lib -DCMAKE_BUILD_TYPE=Bazel -DCMAKE_INSTALL_PREFIX=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml -DCMAKE_PREFIX_PATH=/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml.ext_build_deps -DCMAKE_RANLIB= -DCMAKE_MAKE_PROGRAM=ninja -G Ninja /build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml
-- The C compiler identification is Clang 14.0.0
-- The CXX compiler identification is Clang 14.0.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /opt/llvm/bin/clang-14 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /opt/llvm/bin/clang-14 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Build type: Bazel
-- Hardware initialization logging: OFF
-- Configuring done
-- Generating done
-- Build files have been written to: /build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml.build_tmpdir
+ cmake --build . --config Release
[1/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/software_device.cpp.o
[2/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/nop.cpp.o
[3/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/drain.cpp.o
[4/50] Building C object sources/core/src/sw_dispatcher/CMakeFiles/dml_sw_dispatcher.dir/dml_cpuid.c.o
[5/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/mem_move.c.o
[6/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/fill.c.o
[7/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/compare.c.o
[8/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/compare_pattern.c.o
[9/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/create_delta.c.o
[10/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/apply_delta.c.o
[11/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/dualcast.c.o
[12/50] Building C object sources/core/src/sw_dispatcher/ref/CMakeFiles/dml_kernels_ref.dir/crc.c.o
[13/50] Building C object sources/core/src/dif_impl/CMakeFiles/dml_dif_impl.dir/dml_dif.c.o
[14/50] Building C object sources/core/src/hw_dispatcher/CMakeFiles/dml_hw_dispatcher.dir/hw_configuration_driver.c.o
[15/50] Building CXX object sources/c_api/CMakeFiles/dml.dir/dml_get_library_version.cpp.o
[16/50] Building CXX object sources/middle_layer/CMakeFiles/dml_middle_layer.dir/src/result.cpp.o
[17/50] Building CXX object sources/middle_layer/CMakeFiles/dml_middle_layer.dir/src/make_descriptor.cpp.o
[18/50] Building CXX object sources/core/src/sw_dispatcher/CMakeFiles/dml_sw_dispatcher.dir/optimization_dispatcher.cpp.o
[19/50] Building CXX object sources/core/src/hw_dispatcher/CMakeFiles/dml_hw_dispatcher.dir/hw_queue.cpp.o
[20/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/validation.cpp.o
[21/50] Building C object sources/core/src/sw_dispatcher/avx512/CMakeFiles/dml_kernels_avx512.dir/compare_pattern.c.o
[22/50] Building C object sources/core/src/sw_dispatcher/cache_flush/CMakeFiles/dml_kernels_cache_flush.dir/cache_flush.c.o
/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/core/src/sw_dispatcher/cache_flush/cache_flush.c:65:2: warning: no newline at end of file [-Wnewline-eof]
}
 ^
1 warning generated.
[23/50] Building C object sources/core/src/sw_dispatcher/avx512/CMakeFiles/dml_kernels_avx512.dir/fill.c.o
[24/50] Building C object sources/core/src/sw_dispatcher/avx512/CMakeFiles/dml_kernels_avx512.dir/compare.c.o
/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/core/src/sw_dispatcher/avx512/compare.c:49:2: warning: no newline at end of file [-Wnewline-eof]
}
 ^
1 warning generated.
[25/50] Building CXX object sources/core/src/hw_dispatcher/CMakeFiles/dml_hw_dispatcher.dir/numa.cpp.o
[26/50] Building C object sources/core/src/sw_dispatcher/avx512/CMakeFiles/dml_kernels_avx512.dir/mem_move.c.o
[27/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/dif_update.cpp.o
[28/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/dif_strip.cpp.o
[29/50] Building CXX object sources/c_api/CMakeFiles/dml.dir/dml.cpp.o
FAILED: sources/c_api/CMakeFiles/dml.dir/dml.cpp.o 
/opt/llvm/bin/clang-14 -DDML_GIT_REVISION=\"N/A\" -I/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/c_api/../../include -I/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/c_api/include -I/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/c_api/../include -U_FORTIFY_SOURCE -fstack-protector -Wall -Wthread-safety -Wself-assign -Wunused-but-set-parameter -Wno-free-nonheap-object -fcolor-diagnostics -fno-omit-frame-pointer -stdlib=libc++ -no-canonical-prefixes -Wno-builtin-macro-redefined -D__DATE__=\"redacted\" -D__TIMESTAMP__=\"redacted\" -D__TIME__=\"redacted\" -DABSL_MIN_LOG_LEVEL=4 -fPIC -Wno-deprecated-declarations -std=c++17 -Dlinux -I/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml.ext_build_deps/libuuid/include -fPIC -fstack-protector --param=ssp-buffer-size=8 -fstack-clash-protection -march=native -I/usr/include/c++/ -Wall -Wextra -pedantic -fno-exceptions -fno-rtti -fno-threadsafe-statics -MD -MT sources/c_api/CMakeFiles/dml.dir/dml.cpp.o -MF sources/c_api/CMakeFiles/dml.dir/dml.cpp.o.d -o sources/c_api/CMakeFiles/dml.dir/dml.cpp.o -c /build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/c_api/dml.cpp
/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/c_api/dml.cpp:38:10: error: no member named 'fill_n' in namespace 'std'
    std::fill_n(job_ptr, dml::get_job_size(), 0);
    ~~~~~^
1 error generated.
[30/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/dif_check.cpp.o
[31/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/dualcast.cpp.o
[32/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/dif_insert.cpp.o
[33/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/batch.cpp.o
[34/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/hardware_device.cpp.o
[35/50] Building C object sources/core/src/sw_dispatcher/avx512/CMakeFiles/dml_kernels_avx512.dir/crc.c.o
[36/50] Building CXX object sources/core/src/hw_dispatcher/CMakeFiles/dml_hw_dispatcher.dir/hw_device.cpp.o
[37/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/create_delta.cpp.o
[38/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/apply_delta.cpp.o
[39/50] Building CXX object sources/c_api/CMakeFiles/dml.dir/dml_batch.cpp.o
[40/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/compare_pattern.cpp.o
[41/50] Building CXX object sources/core/src/hw_dispatcher/CMakeFiles/dml_hw_dispatcher.dir/hw_dispatcher.cpp.o
[42/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/fill.cpp.o
[43/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/copy_crc.cpp.o
[44/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/compare.cpp.o
[45/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/mem_move.cpp.o
[46/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/cache_flush.cpp.o
[47/50] Building CXX object sources/middle_layer/CMakeFiles/dml_middle_layer.dir/src/core_interconnect.cpp.o
In file included from /build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/middle_layer/src/core_interconnect.cpp:13:
/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/middle_layer/src/awaiter.hpp:87:27: warning: private field 'period_' is not used [-Wunused-private-field]
        uint32_t          period_        = 0u; /**<Number of clocks between checks */
                          ^
/build/tmp/_bazel_envoybuild/b570b5ccd0454dc9af9f65ab1833764d/sandbox/processwrapper-sandbox/2/execroot/envoy/external/com_github_intel_dml/sources/middle_layer/src/awaiter.hpp:89:27: warning: private field 'idle_state_' is not used [-Wunused-private-field]
        uint32_t          idle_state_    = 0u; /**<State for CPU wait control */
                          ^
2 warnings generated.
[48/50] Building CXX object sources/core/CMakeFiles/dml_core.dir/src/crc.cpp.o
ninja: build stopped: subcommand failed.
_____ END BUILD LOGS _____
rules_foreign_cc: Build wrapper script location: bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/wrapper_build_script.sh
rules_foreign_cc: Build script location: bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/build_script.sh
rules_foreign_cc: Build log location: bazel-out/k8-fastbuild/bin/external/envoy/bazel/foreign_cc/dml_foreign_cc/CMake.log

Target //contrib/exe:envoy-static failed to build
[32mINFO: [0mElapsed time: 14.028s, Critical Path: 2.07s
[32mINFO: [0m6 processes: 5 internal, 1 processwrapper-sandbox.
[0m